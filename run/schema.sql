CREATE TABLE model (
  id    INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  name  VARCHAR(32),
  INDEX (name)
) ENGINE = innodb;

CREATE TABLE submission (
  id      INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  modelId INT UNSIGNED,
  score   FLOAT UNSIGNED,

  CONSTRAINT FOREIGN KEY (modelId) REFERENCES model (id) ON DELETE CASCADE
) ENGINE = innodb;

CREATE TABLE submissionParts (
  id      INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  submissionId INT UNSIGNED,
  fileId INT UNSIGNED,
  labelId INT UNSIGNED,

  CONSTRAINT FOREIGN KEY (submissionId) REFERENCES submission (id) ON DELETE CASCADE,
  CONSTRAINT FOREIGN KEY (fileId) REFERENCES file (id) ON DELETE CASCADE,
  CONSTRAINT FOREIGN KEY (labelId) REFERENCES label (id) ON DELETE CASCADE
) ENGINE = innodb;

CREATE TABLE file (
  id   INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(32),
  INDEX (name)
) ENGINE = innodb;

CREATE TABLE label (
  id   INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(32),
  INDEX (name)
) ENGINE = innodb;
